{
  "name": "orb_v1_golden_retest",
  "description": "Golden snapshot: NY AM ORB v1, retest-confirm long.",
  "engine_params": {
    "or_minutes": 30,
    "confirm_mode": "retest"
  },
  "session_df_args": {
    "n_bars": 50,
    "or_high": 101.0,
    "or_low": 99.0
  },
  "bar_overrides": [
    {
      "bar": 31,
      "High": 101.5,
      "Close": 101.3
    },
    {
      "bar": 33,
      "Low": 100.95,
      "Close": 101.2,
      "High": 101.3
    }
  ],
  "expected_summary": {
    "num_trades": 1,
    "win_rate": 0.0
  },
  "expected_events": [
    {
      "type": "orb_range_update",
      "bar_index": 0,
      "ts": "2024-01-02T14:30:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 100.3,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 1,
      "ts": "2024-01-02T14:31:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 100.3,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 2,
      "ts": "2024-01-02T14:32:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 100.3,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 3,
      "ts": "2024-01-02T14:33:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 100.3,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 4,
      "ts": "2024-01-02T14:34:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 100.3,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 5,
      "ts": "2024-01-02T14:35:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 6,
      "ts": "2024-01-02T14:36:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 7,
      "ts": "2024-01-02T14:37:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 8,
      "ts": "2024-01-02T14:38:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 9,
      "ts": "2024-01-02T14:39:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.7,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 10,
      "ts": "2024-01-02T14:40:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 11,
      "ts": "2024-01-02T14:41:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 12,
      "ts": "2024-01-02T14:42:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 13,
      "ts": "2024-01-02T14:43:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 14,
      "ts": "2024-01-02T14:44:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 15,
      "ts": "2024-01-02T14:45:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 16,
      "ts": "2024-01-02T14:46:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 17,
      "ts": "2024-01-02T14:47:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 18,
      "ts": "2024-01-02T14:48:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 19,
      "ts": "2024-01-02T14:49:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 20,
      "ts": "2024-01-02T14:50:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 21,
      "ts": "2024-01-02T14:51:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 22,
      "ts": "2024-01-02T14:52:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 23,
      "ts": "2024-01-02T14:53:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 24,
      "ts": "2024-01-02T14:54:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 25,
      "ts": "2024-01-02T14:55:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 26,
      "ts": "2024-01-02T14:56:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 27,
      "ts": "2024-01-02T14:57:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 28,
      "ts": "2024-01-02T14:58:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_update",
      "bar_index": 29,
      "ts": "2024-01-02T14:59:00+00:00",
      "session_date": "2024-01-02",
      "phase": "or_build",
      "schema_version": "1.0.0",
      "orb_high": 101.0,
      "orb_low": 99.0,
      "or_minutes": 30,
      "or_start_index": 0
    },
    {
      "type": "orb_range_locked",
      "bar_index": 29,
      "ts": "2024-01-02T14:59:00+00:00",
      "session_date": "2024-01-02",
      "phase": "breakout_scan",
      "schema_version": "1.0.0",
      "high": 101.0,
      "low": 99.0,
      "range": 2.0,
      "or_minutes": 30,
      "or_start_index": 0,
      "or_lock_index": 29,
      "or_bar_count_needed": 30
    },
    {
      "type": "setup_valid",
      "bar_index": 33,
      "ts": "2024-01-02T15:03:00+00:00",
      "session_date": "2024-01-02",
      "phase": "entry",
      "schema_version": "1.0.0",
      "direction": "long",
      "level": 101.0,
      "confirm_mode": "retest",
      "trigger_price": 101.2
    },
    {
      "type": "entry_signal",
      "bar_index": 33,
      "ts": "2024-01-02T15:03:00+00:00",
      "session_date": "2024-01-02",
      "phase": "trade_mgmt",
      "schema_version": "1.0.0",
      "side": "buy",
      "price": 101.2,
      "stop": 99.0,
      "target": 104.5,
      "size": 45.454545454545396,
      "risk_points": 2.200000000000003
    }
  ],
  "expected_trades": [
    {
      "entry_time": "2024-01-02T15:03:00+00:00",
      "exit_time": "2024-01-02T15:19:00+00:00",
      "side": "long",
      "entry_price": 101.2,
      "exit_price": 100.0,
      "size": 45.454545454545396,
      "pnl": -63.69090909090914,
      "return_pct": -0.6369090909090913,
      "duration_bars": 16,
      "exit_reason": "eod"
    }
  ]
}